# 人事管理

## 功能概述

人事管理是OA办公自动化系统的核心功能模块之一，主要负责组织架构管理、用户权限管理以及角色配置等工作，为其他业务模块提供基础的组织和权限支持。

### 主要功能

人事管理模块包含4个主要子功能：

1. **用户管理** - 用户账号管理、基本信息维护
2. **部门管理** - 组织架构建设、部门层级管理
3. **职位管理** - 职位定义、职级体系设置
4. **角色权限** - 用户角色分配、权限配置管理

### 权限说明

- **系统管理员**：拥有所有人事管理权限
- **HR管理员**：负责人员信息管理
- **部门经理**：管理本部门人员信息
- **普通用户**：仅能查看和修改个人信息

## 用户管理

### 功能入口

**访问路径：** [系统管理] > [用户管理]  
**URL地址：** `/usermanage`  
**所需权限：** 系统管理员、HR权限

### 用户列表

#### 查看用户

1. 点击左侧菜单中的"系统管理"
2. 选择"用户管理"进入用户列表页面
3. 查看系统中所有用户的基本信息和状态

**用户信息字段：**
- 用户ID（系统自动生成）
- 用户姓名（必填项）
- 登录用户名
- 联系电话（选填项）
- 职位信息（关联职位表）
- 角色分配（关联角色表）
- 所属部门（部门层级）
- 用户状态（启用/禁用）

#### 用户搜索

1. 在用户列表页面点击"搜索"按钮
2. 可以通过以下条件搜索：
   - 用户真实姓名搜索
   - 登录用户名搜索
   - 部门归属
   - 角色归属
   - 状态筛选

### 新增用户

#### 添加用户入口

1. 在用户列表页面点击"新增用户"按钮
2. 填写用户基本信息表单

**必填字段：**
- **用户名**：3-20个字符，支持字母、数字
- **密码**：用户登录密码
- **姓名**：用户真实姓名（2-10个字符）
- **性别**：选择性别信息

**选填字段：**
- **联系电话**：手机号码
- **联系地址**：详细地址信息
- **所属部门**：选择部门层级结构
- **分配角色**：为用户分配权限
- **头像上传**：用户头像图片
- **备注**：其他说明信息

3. 完成信息填写后点击"提交"按钮
4. 系统验证信息后创建用户账号

#### 验证规则

- 用户名不能重复，系统自动检查唯一性
- 姓名长度限制：2-10个汉字，或者2-20个字母
- 联系电话格式验证
- 密码长度要求，详见[系统设置-密码修改](13-系统设置.md#密码修改)

### 编辑用户

#### 修改用户信息

1. 在用户列表中点击目标用户
2. 点击操作列的"编辑"按钮
3. 在弹出的编辑表单中修改相应字段
4. 点击"提交"保存修改

#### 重置密码

1. 在用户列表中找到"重置密码"按钮
2. 输入新密码并确认
3. 普通管理员可以重置下级用户密码
4. 系统管理员可以重置所有用户密码

#### 用户状态

- **启用用户**：用户正常登录，可使用系统功能
- **禁用用户**：用户无法登录，但保留数据信息
- **删除用户**：彻底删除用户账号，谨慎操作（不推荐）

### 用户批量操作

支持用户批量管理操作：

- **批量信息导出**：导出Excel格式用户报表
- **批量信息导入**：通过Excel批量创建用户
- **批量状态修改**：批量启用/禁用用户
- **批量角色分配**：用户角色批量分配
- **批量权限设置**：为多个用户统一配置权限

## 部门管理

### 功能入口

**访问路径：** [人事管理] > [部门管理]  
**URL地址：** `/deptmanage`  
**所需权限：** 系统管理员权限

### 部门结构

部门管理采用树形结构管理企业组织架构：

```
公司总部
├── 管理部
│   ├── 人事部
│   └── 总经理办公室
├── 技术部门
│   ├── 软件开发部
│   ├── 测试部
│   ├── 技术支持部
│   └── IT部门
└── 财务部
    ├── 会计部
    ├── 出纳部
    └── 审计部
```

### 部门列表

#### 查看部门

1. 进入部门管理页面
2. 查看部门树形结构，系统显示所有部门
3. 支持部门展开/收起功能

**部门信息字段：**
- 部门编号（系统自动生成）
- 部门名称（必填，不能重复）
- 部门负责人（可选，关联用户表）
- 部门电话（联系电话）
- 上级部门（设置部门层级关系）
- 部门地址（部门办公地址）
- 部门描述（部门职能说明）
- 管理范围（所属管理员权限范围）

### 新增部门

#### 添加部门

1. 在部门管理页面点击"新增部门"按钮
2. 填写部门信息表单

**基本信息：**
- **部门名称**：填写部门名称
- **上级部门**：选择上级部门，建立层级关系
- **部门负责人**：从用户列表中选择负责人

**扩展信息：**
- **部门电话**：部门联系电话
- **部门地址**：详细办公地址
- **部门描述**：部门职能说明
- **办公地址**：具体办公地点

**管理信息：**
- **部门描述**：详细描述部门职责
- **管理范围**：权限管理范围

3. 点击"提交"保存部门

### 编辑部门

#### 修改部门信息

1. 在部门列表中点击目标部门
2. 点击编辑按钮进入"编辑部门"页面
3. 修改部门相关信息
4. 保存修改

### 删除部门

#### 删除部门流程

1. 在部门列表中选择目标部门
2. 点击操作列的"删除"按钮
3. 删除部门前需要移除部门员工
4. 确认删除

#### 调整部门结构

1. **上级调整**：修改部门上级部门，重新整理层级结构
2. **平级调整**：部门间的平级关系调整
3. **撤销合并**：撤销部门或合并部门操作

#### 转移部门负责人

1. 在部门列表找到目标"转移负责人"
2. 选择新的负责人候选用户
3. 确认转移，系统自动更新相关权限

### 删除部门注意事项

#### 删除前提

删除部门需要满足以下条件：
- 部门下无员工关联
- 部门下无子部门关联

#### 删除流程

1. 检查部门关联员工
2. 转移员工到其他部门
3. 确认删除部门

## 职位管理

### 功能入口

**访问路径：** [系统管理] > [职位管理]  
**URL地址：** `/positionmanage`  
**所需权限：** 系统管理员权限

### 职位体系

#### 职位分类

系统支持多种职位分类体系：

1. **管理岗**：总经理、副总经理、部门经理
2. **技术岗**：高级工程师、工程师、初级工程师
3. **销售岗**：销售总监、销售经理
4. **支持岗**：技术支持、客户服务、行政专员
5. **财务岗**：财务经理、会计、出纳

#### 新增职位

1. 进入职位管理页面
2. 点击"新增职位"所有职位信息
3. 设置职位详细信息，包括：
   - 职位名称
   - 职位描述
   - 薪资范围（选填）
   - 职位等级
   - 岗位职责
   - 任职要求
   - 备注说明

### 编辑职位

#### 修改职位

1. 点击操作列"编辑职位"按钮
2. 修改职位信息

**基本信息：**
- **职位名称**：职位名称标识
- **职位描述**：详细职位说明
- **薪资范围**：职位薪资区间（选填）
- **职位分类**：职位所属分类

**详细信息：**
- **职位等级**：职位等级划分
- **岗位职责**：详细岗位职责
- **任职要求**：岗位任职要求
- **其他要求**：其他相关要求

3. 保存职位信息

### 删除职位

1. 在职位列表中选择"删除"
2. 删除职位前系统会检查该职位关联用户
3. 确认删除职位等级
4. 保存删除

### 删除职位

#### 删除前提

- 确认职位下没有在职用户
- 确认相关数据完整性，避免数据不一致

#### 删除流程

1. 检查职位关联情况
2. 转移用户职位关系
3. 系统管理员确认删除

## 角色权限管理

### 功能入口

**访问路径：** [系统管理] > [角色管理]  
**URL地址：** `/rolemanage`  
**所需权限：** 超级系统管理员权限

### 系统角色

#### 默认角色

系统预置以下角色：

1. **超级管理员**
   - 拥有系统所有权限
   - 可以创建、修改管理员账号
   - 删除和恢复权限

2. **系统管理员**
   - 用户管理权限
   - 系统基础设置权限
   - 流程配置权限系统管理员

3. **普通员工**
   - 基础办公功能权限
   - 审批流程权限
   - 个人信息设置权限

4. **HR管理员**
   - 人事信息管理权限
   - 考勤管理权限
   - 员工信息管理权限

5. **财务管理员**
   - 财务相关审批权限
   - 报销单据审批权限
   - 财务系统权限

6. **部门经理**
   - 所属部门人员管理权限
   - 审批权限管理权限
   - 流程配置权限

### 角色管理

#### 新增角色

1. 进入角色管理页面
2. 点击"新增角色"按钮，系统显示所有角色信息
3. 设置角色详细信息，包括：
   - 角色名称
   - 角色描述
   - 用户范围
   - 权限范围
   - 备注说明

#### 编辑角色

1. 点击操作列"编辑角色"按钮
2. 进入角色基本信息
   - **角色名称**：角色标识名称
   - **角色描述**：角色功能描述
   - **显示顺序**：角色显示优先级

3. 配置角色权限
   - 勾选权限列表中的对应权限
   - 支持功能模块级权限
   - 细粒度权限控制

4. 保存角色配置

#### 删除角色

1. 在角色列表中选择"删除"
2. 删除角色前系统检查关联用户
3. 调整角色权限配置
4. 保存删除

**注意**：删除角色会影响该角色下的用户

#### 复制角色

1. 选择需要复制的角色
2. 点击"复制角色"按钮
3. 进入编辑角色信息
4. 调整权限配置
5. 保存新角色

### 权限配置

#### 权限分类

系统权限分为以下功能类别：

1. **系统管理权限**
   - 用户管理（新增、删除、修改）
   - 部门管理（新增、删除、修改）
   - 职位管理（新增、删除、修改）
   - 角色管理（新增、删除、修改）

2. **考勤权限**
   - 考勤打卡权限
   - 考勤记录查询权限
   - 考勤统计报表权限

3. **流程审批权限**
   - 流程申请（请假、加班、出差等）
   - 流程审批（一级审批、二级审批）
   - 流程查询统计权限

4. **系统设置权限**
   - 系统基础参数配置权限
   - 菜单管理权限（管理员专用）
   - 参数管理权限

#### 权限矩阵

| 系统功能 | 超管 | 管理员 | 普通员工 | HR管理 | 财务 | 部门经理 |
|---------|------|--------|----------|--------|------|----------|
| 用户管理 | ✓ | ✓ | ✕ | 部分权限 | ✕ | ✕ | 所属部门 |
| 部门管理 | ✓ | ✓ | ✕ | 部分权限 | ✕ | ✕ | 查看权限 |
| 职位管理 | ✓ | ✓ | ✕ | ✕ | ✕ | ✕ | 查看权限 |
| 角色管理 | ✓ | ✓ | ✕ | ✕ | ✕ | ✕ | ✕ |
| 考勤管理 | ✓ | ✓ | ✕ | 部分权限 | ✕ | ✕ | 所属部门 |
| 流程审批 | ✓ | ✓ | ✕ | 审批权限 | ✕ | 审批权限 | 配置权限 |
| 系统设置 | ✓ | ✓ | ✕ | ✕ | ✕ | ✕ | ✕ |

### 用户角色分配

#### 分配角色

1. 在用户列表页面选择用户
2. 点击"分配角色"按钮
3. 选择角色列表中的**多个角色**
4. 保存分配结果

#### 移除分配

1. 在用户列表中选择指定用户
2. 点击"移除分配角色"
3. 选择需要移除的角色
4. 确认移除操作

#### 角色继承

- 用户权限从所分配角色继承
- 权限范围取所有角色权限的并集
- 管理员具有最高优先级权限

## 数据库表

### 数据表结构

人事管理模块涉及以下数据表：

#### 用户表 (aoa_user)
- **主要字段**：用户ID、用户名、姓名、密码
- **关联字段**：部门ID、职位ID、角色ID
- **状态字段**：用户状态、创建时间、更新时间

#### 部门表 (aoa_dept)
- **基本信息**：部门名称、部门负责人
- **层级关系**：上级部门ID
- **联系信息**：部门电话、办公地址

#### 职位表 (aoa_position)
- **职位信息**：职位名称、描述、分类
- **等级信息**：岗位职责、任职要求
- **关联信息**：薪资范围、其他要求

#### 角色表 (aoa_role)
- **角色标识**：角色名称、描述
- **权限关联**：角色权限关联表
- **用户关联**：用户范围、显示顺序

### 数据操作

#### 数据备份

- 定期备份用户数据，避免数据丢失
- 重要操作提供30天内数据恢复
- 管理员可以导出用户基础信息

#### 操作日志

1. 进入系统管理 > 数据备份
2. 选择"创建备份"
3. 点击"恢复"
4. 确认恢复时间点

## 故障排除

### 用户问题

**Q: 无法创建新用户或用户名冲突**
A: 解决方案：
1. 检查用户名是否为特殊字符
2. 确认分配角色权限是否正确
3. 检查系统权限是否正确
4. 联系管理员确认操作权限

**Q: 如何批量导入用户**
A: 可以通过Excel批量导入，支持用户信息和角色的API批量导入

**Q: 用户无法登录或密码错误**
A: 解决方案：
1. 检查用户状态是否为"启用"
2. 重置用户密码，重新尝试
3. 30天内检查账号是否被删除或锁定

### 部门管理

**Q: 删除部门时系统提示有关联数据**
A: 部门结构调整需要先清理关联数据：
1. 检查部门结构
2. 设置新的上级部门关联
3. 确保相关权限正确无误

**Q: 部门负责人无法更换**
A: 按以下步骤处理：
1. 检查新负责人
2. 重新分配部门权限，确保新负责人权限
3. 移除原负责人的相关部门权限

### 角色权限

**Q: 如何给用户分配多个权限**
A: 在用户管理页面点击"权限配置"，然后用户的所有角色，权限计算为并集

**Q: 删除角色权限后用户无法使用功能**
A: 权限删除影响用户的实际使用功能，请及时联系超级管理员"检查用户"

## 最佳实践

### 组织架构设计

1. **层级简单**：建议组织架构层级不超过5级
2. **职责明确**：每个部门职责清晰，避免重复
3. **职位清晰**：设置清晰的职位体系，便于人员分类
4. **权限合理**：合理分配权限，避免权限过度集中

### 用户管理规范

1. **账号规范**：统一用户名命名规则
2. **信息完整**：完善用户基本信息，方便协作
3. **权限最小**：遵循最小权限原则，减少安全风险
4. **定期审核**：定期审查用户账号和权限分配

### 数据维护

1. **权限审计**：定期审计用户权限
2. **数据清理**：定期清理无效用户和历史数据
3. **备份策略**：建立完善的数据备份和恢复机制
4. **监控预警**：监控系统访问和权限变更操作

---

[返回目录](README.md) | [上一章：快速入门](02-快速入门.md) | [下一章：考勤管理](04-考勤管理.md)